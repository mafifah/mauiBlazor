@page "/form"
@using mauiBlazor.Data
@inject DataService DataService
@inject NavigationManager NavigationManager

<pthRazorLibrary.Controls.PthForm NamaForm="@NamaForm">
    <Konten>
        <pthRazorLibrary.Controls.PthEntri LabelEntri="Nama Lengkap">
            <Entri>
                <RadzenTextBox style="width: 100%;" @bind-Value="karyawan.NamaLengkap" />
            </Entri>
        </pthRazorLibrary.Controls.PthEntri>
        <pthRazorLibrary.Controls.PthEntri LabelEntri="Nama Panggilan">
            <Entri>
                <RadzenTextBox style="width: 100%;" @bind-Value="karyawan.NamaPanggilan" />
            </Entri>
        </pthRazorLibrary.Controls.PthEntri>
        <pthRazorLibrary.Controls.PthEntri LabelEntri="Alamat">
            <Entri>
                <RadzenTextArea style="width: 100%;" @bind-Value="karyawan.Alamat" />
            </Entri>
        </pthRazorLibrary.Controls.PthEntri>
        <pthRazorLibrary.Controls.PthEntri LabelEntri="Kota">
            <Entri>
                <RadzenTextBox style="width: 100%;" @bind-Value="karyawan.Kota" />
            </Entri>
        </pthRazorLibrary.Controls.PthEntri>
    </Konten>
    <Footer>
        <RadzenButton ButtonStyle="ButtonStyle.Secondary" Icon="save" Text="Simpan" Click="@SimpanData"/>&nbsp;
        <RadzenButton ButtonStyle="ButtonStyle.Light" Icon="cancel" Text="Batal" />
    </Footer>
</pthRazorLibrary.Controls.PthForm>
@code {
    public string NamaForm { get; set; } = "Form Tambah Karyawan";

    private DataKaryawan karyawan { get; set; } = new DataKaryawan();
    protected override async Task OnInitializedAsync()
    {
        karyawan = DataService.karyawanDipilih;
        if (karyawan.IdKaryawan != Guid.Empty)
            NamaForm = "Form Edit Karyawan";
        this.StateHasChanged();
    }
    void SimpanData(){
        if (NamaForm.Contains("Tambah"))
        {
            DataService.InsertKaryawan(karyawan);
        }else{
            DataService.UpdateKaryawan(karyawan);
        }
        NavigationManager.NavigateTo("/crudpage");
    }
}
